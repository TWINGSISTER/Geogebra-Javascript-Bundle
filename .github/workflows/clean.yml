on:
  push:
    branches: [ master ]
env:
  CPY: './thiscopy'
jobs:

  build:
  
    runs-on: ubuntu-latest
    steps:
#    - name: Clean all the releases
#      id: date
#      uses: actions/checkout@v2
#      with :
#        repository: TWINGSISTER/Geogebra-Javascript-Bundle
#        ref: master
#        path: ${{env.CPY}}
    - name: delete action
    - uses: dev-drprasad/delete-older-releases@v0.2.0
      with:
        repo: TWINGSISTER/Geogebra-Javascript-Bundle # defaults to current repo
        keep_latest: 3
        delete_tags: true
        #delete_tag_pattern: beta # defaults to ""
      env:
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}    
    - name: Setup tmate sessions
      uses: mxschmitt/action-tmate@v3   
    - name: delete all
      run: |
        gh release list | sed 's/|/ /' | awk '{print $1, $8}' | while read -r line; do gh release delete -y "$line"; done
        git fetch
        git tag -l | xargs -n 1 git push --delete origin